version: '3'

services:
  webapi:
    image: localhost:5000/webapi
    build:
      context: .
      dockerfile: WebAPI/Dockerfile
    ports:
      - "8091:80"
    links:
      - corewebapi

  corewebapi:
    image: localhost:5000/corewebapi
    build:
      context: .
      dockerfile: CoreWebAPI/Dockerfile
    ports:
      - "8090:80"

  apiintegrationtests:
    image: localhost:5000/apiintegrationtests
    build:
      context: .
      dockerfile: Tests/API.IntegrationTests/Dockerfile
    links:
      - corewebapi
      - webapi